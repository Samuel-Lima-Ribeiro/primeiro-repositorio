<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    Ra do aluno: <input type="text" id="input_ra_aluno"> <br>
    Nota do aluno: <input type="text" id="input_nota_aluno"> <br>
    <button onclick="guardar_informacao()">guardar</button> <br>
    Campo: <input onkeyup="verificar()" type="text" id="input_campo"> <br>
    <button onclick="analisar()">Analisar</button>
    <div id="div_resultado"></div>
</body>

</html>

<script>
    var lista_ra = []
    var lista_nota = []

    function guardar_informacao() {
        var nota_aluno = Number(input_nota_aluno.value)
        var ra_aluno = Number(input_ra_aluno.value)

        lista_nota.push(nota_aluno)
        lista_ra.push(ra_aluno)

    }

    function verificar() {
        var verificar_letra = input_campo.value

        if (input_campo.value.length >= 1) {
            if (!(verificar_letra == "p" || verificar_letra == "P") && !(verificar_letra == "i" || verificar_letra == "I")) {
                alert("valor invalido, entre com P ou I")
                input_campo.value = ""
            }
        }
    }

    function analisar() {
        div_resultado.innerHTML = ""

        var numero_usuario = input_campo.value
        var media_alunos = 0
        var qtd_chamados = 0

        if(numero_usuario == ("P" , "p")) {
            for(var contador = 0;contador < lista_ra.length; contador++) {
                if(lista_ra[contador] % 2 == 0) {
                    media_alunos += Number(lista_nota[contador])
                    qtd_chamados += 1
                }
            }
        } else {
            for(var contador = 0; contador < lista_ra.length; contador++) {
                if(lista_ra[contador] % 2 != 0) {
                    media_alunos += Number(lista_nota[contador])
                    qtd_chamados += 1
                }
            }
        }

        media_alunos = media_alunos / qtd_chamados
        var qtd_acima_media = 0
        var media_acima = 0

        for(var contador = 0; contador < lista_ra.length; contador++) {
            if(lista_nota[contador] >= media_alunos) {
                div_resultado.innerHTML += `Aluno com RA = ${lista_ra[contador]} e nota ${lista_nota[contador]} foi selecionado pois a média é ${media_alunos}<br>`

                qtd_acima_media += 1
                media_acima += lista_nota[contador]
            }
        }
        div_resultado.innerHTML += `quantidade de notas acima da média: ${qtd_acima_media}, nova média: ${media_acima / qtd_acima_media}`

    }

</script>